# Application Architecture: Modular Monolith

## 1. High-Level Pattern
This application follows a **Modular Monolith** architecture using the `nwidart/laravel-modules` package.
Code is organized by **Domain Context** (Modules) rather than technical layer.

* **Location:** All core business logic lives in `app/Modules/`.
* **The `app/` Root:** Standard Laravel folders (`app/Http`, `app/Models`) should remain empty or minimal. They are reserved for global "Glue" code (e.g., Middleware, Auth) that applies to the entire application.

## 2. Directory Structure
Each logical domain (e.g., `Hevy`, `Strava`) follows this strict structure generated by the package:

```text
app/Modules/{DomainName}/
├── Config/            # Module-specific config
├── Console/           # Artisan commands
├── Database/
│   ├── Factories/
│   ├── Migrations/    # Module-specific migrations
│   └── Seeders/
├── Http/
│   ├── Controllers/   # Entry points (Inertia responses)
│   ├── Middleware/
│   ├── Requests/      # Form Requests
│   └── Resources/     # API/Inertia Resources
├── Models/            # Database Models (Renamed from Entities)
├── Providers/         # Service Providers (Auto-registered)
├── Routes/            # Routing
│   ├── api.php
│   └── web.php
├── Services/          # Business Logic (Manually created)
└── Tests/             # Module-specific tests
```

## 3. Namespacing & File Placement
* **Namespace:** All classes within a module must use: `App\Modules\{DomainName}\{Layer}`.
* **Example:**
    * Controller: `App\Modules\Strava\Http\Controllers\ActivityController`
    * Model: `App\Modules\Strava\Models\Activity`

## 4. Layer Responsibilities

### A. Http Layer
* **Controllers:** Strictly for handling HTTP input. Return `Inertia::render`.
* **Requests:** Use `FormRequest` classes for validation.
* **Resources:** Transform data before sending to Vue.

### B. Domain Layer
* **Services:** Create a `Services` folder manually. This is where business logic lives.
* **Models:** Strictly for database configuration (`$guarded = []`).

## 5. Frontend Architecture (Inertia + Vue)
* **Pages:** `resources/js/Pages/{Module}/Index.vue`
* **Components:** `resources/js/Components`
* **Note:** We do **not** use the `Resources/assets/js` folder inside the Module for Vue files. We keep all Vue files in the main `src/resources/js` folder to simplify the Vite build process and hot-reloading.